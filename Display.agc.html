<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta content="text/html;charset=ISO-8859-1" http-equiv="Content-Type">
<title>Assembly listing generated by yaYUL</title>
<style type="text/css">
p.nobreak { white-space:nowrap; }
a { text-decoration:none; }
a:visited { COLOR: #000850; }
</style>
<style type="text/css">
.op{
font-weight: bold;
color: #993300;
}
</style>
<style type="text/css">
.dn{
color: #009900;
}
</style>
<style type="text/css">
.fe{
color: #FF0000;
}
</style>
<style type="text/css">
.in{
color: #FF6600;
}
</style>
<style type="text/css">
.ps{
color: #336600;
}
</style>
<style type="text/css">
.sm{
color: #0000FF;
}
</style>
<style type="text/css">
.wn{
color: #FF9900;
}
</style>
<style type="text/css">
.co{
font-style: italic;
color: #993399;
}
</style>
</head>
<body>
<p class="nobreak">
<span style="font-family: monospace;">
<pre>
<h1>Source Code</h1>
000079,000001: 
<a name="444953504E554D"></a>000080,000002:    4065                        <span class="sm">DISPNUM </span>                                                          <span class="co">#  CUR_ID is the index of next segment to display (0=left prog, 20 = digit 5 bottom row)</span>
000081,000003:                                                                                                  <span class="co">#  Print value held in VALUES array to correct segment</span>
000082,000004: 
000083,000005:                                                                                                  <span class="co">#  Data is sent to the DSKY via Channel 10 two digits at a time.</span>
000084,000006:                                                                                                  <span class="co">#  Bits 10-14 select which pair of digits we want to draw</span>
000085,000007:                                                                                                  <span class="co">#  Bits 0-4 selects which digit to draw on the right segment</span>
000086,000008:                                                                                                  <span class="co">#  Bits 5-9 selects which digit to draw on the left segment</span>
000087,000009: 
000088,000010:    4065           30007                           <span class="op">CA      </span> <a href="Constants.agc.html#5A45524F4553">ZEROES</a>                                <span class="co">#  Load 0 into accumulator from a fixed rom constant</span>
000089,000011:    4066           54134                           <span class="op">TS      </span> <a href="Ram.agc.html#44494749545F4C">DIGIT_L</a>                               <span class="co">#  Reset left digit calculation to 0 (empty)</span>
000090,000012:    4067           54135                           <span class="op">TS      </span> <a href="Ram.agc.html#44494749545F52">DIGIT_R</a>                               <span class="co">#  Reset right digit calculation to 0 (empty)</span>
000091,000013: 
000092,000014:    4070           50131                           <span class="op">INDEX   </span> <a href="Ram.agc.html#4355525F4944">CUR_ID</a>                                <span class="co">#  Index next instruction by segment id</span>
000093,000015:    4071           34375                           <span class="op">CA      </span> <a href="Constants.agc.html#5345475F30">SEG_0</a>                                 <span class="co">#  Get which pair of digits this segment belongs to</span>
000094,000016:    4072           54132                           <span class="op">TS      </span> <a href="Ram.agc.html#5345475F4F5554">SEG_OUT</a>                               <span class="co">#  Save ID to RAM</span>
000095,000017: 
000096,000018:    4073           50132                           <span class="op">INDEX   </span> <a href="Ram.agc.html#5345475F4F5554">SEG_OUT</a>                               <span class="co">#  Index next instruction by segment pair id</span>
000097,000019:    4074           34422                           <span class="op">CA      </span> <a href="Constants.agc.html#534547434F4445">SEGCODE</a>                               <span class="co">#  Get value required in bits 10-14 to select pair, using id</span>
000098,000020:    4075           54133                           <span class="op">TS      </span> <a href="Ram.agc.html#44534B595F4F5554">DSKY_OUT</a>                              <span class="co">#  Save to RAM to use later when we have the digit data</span>
000099,000021: 
000100,000022:    4076           50131                           <span class="op">INDEX   </span> <a href="Ram.agc.html#4355525F4944">CUR_ID</a>                                <span class="co">#  Index next instruction by segment id</span>
000101,000023:    4077           30104                           <span class="op">CA      </span> <a href="Ram.agc.html#56414C554553">VALUES</a>                                <span class="co">#  Get the value in RAM we want to display here</span>
000102,000024:    4100           54063                           <span class="op">TS      </span> <a href="Ram.agc.html#54454D5049">TEMPI</a>                                 <span class="co">#  Save to temporary RAM variable</span>
000103,000025: 
000104,000026:    4101           50131                           <span class="op">INDEX   </span> <a href="Ram.agc.html#4355525F4944">CUR_ID</a>                                <span class="co">#  Index next instruction by segment id</span>
000105,000027:    4102           34350                           <span class="op">CA      </span> <a href="Constants.agc.html#4C45465452494748">LEFTRIGHT</a>                             <span class="co">#  Get whether this segment is left or right of its pair</span>
000106,000028:    4103           00006                           <span class="op">EXTEND  </span>                                       <span class="co">#  Extend to use a new Block 2 AGC instruction</span>
000107,000029:    4104           14123                           <span class="op">BZF     </span> <a href="#534B49504C454654">SKIPLEFT</a>                              <span class="co">#  If zero (is right), skip the left digit</span>
000108,000030: 
<a name="43414C434C454654"></a>000109,000031:    4105                        <span class="sm">CALCLEFT</span>                                                          
000110,000032:    4105           50063                           <span class="op">INDEX   </span> <a href="Ram.agc.html#54454D5049">TEMPI</a>                                 <span class="co">#  Index next instruction by our digit (0-9)</span>
000111,000033:    4106           34232                           <span class="op">CA      </span> <a href="Constants.agc.html#44535030">DSP0</a>                                  <span class="co">#  Get the 5-bit code for this digit to send to DSKY</span>
000112,000034:    4107           54022                           <span class="op">TS      </span> <a href="Constants.agc.html#43594C">CYL</a>                                   <span class="co">#  Transfer it to the shift left register</span>
000113,000035:    4110           30022                           <span class="op">CA      </span> <a href="Constants.agc.html#43594C">CYL</a>                                   <span class="co">#  Shift left no 1</span>
000114,000036:    4111           30022                           <span class="op">CA      </span> <a href="Constants.agc.html#43594C">CYL</a>                                   <span class="co">#  Shift left no 2</span>
000115,000037:    4112           30022                           <span class="op">CA      </span> <a href="Constants.agc.html#43594C">CYL</a>                                   <span class="co">#  Shift left no 3</span>
000116,000038:    4113           30022                           <span class="op">CA      </span> <a href="Constants.agc.html#43594C">CYL</a>                                   <span class="co">#  Shift left no 4</span>
000117,000039:    4114           30022                           <span class="op">CA      </span> <a href="Constants.agc.html#43594C">CYL</a>                                   <span class="co">#  Shift left no 5 (is now in bits 5-9 for the left digit)</span>
000118,000040:    4115           54134                           <span class="op">TS      </span> <a href="Ram.agc.html#44494749545F4C">DIGIT_L</a>                               <span class="co">#  Save to RAM to use later</span>
000119,000041: 
000120,000042:    4116           24131                           <span class="op">INCR    </span> <a href="Ram.agc.html#4355525F4944">CUR_ID</a>                                <span class="co">#  Move onto the right segment of the pair</span>
000121,000043:    4117           50131                           <span class="op">INDEX   </span> <a href="Ram.agc.html#4355525F4944">CUR_ID</a>                                <span class="co">#  Index by new segment id</span>
000122,000044:    4120           30104                           <span class="op">CA      </span> <a href="Ram.agc.html#56414C554553">VALUES</a>                                <span class="co">#  Get value to display on right digit</span>
000123,000045:    4121           54135                           <span class="op">TS      </span> <a href="Ram.agc.html#44494749545F52">DIGIT_R</a>                               <span class="co">#  Save to RAM to use later</span>
000124,000046: 
000125,000047:    4122           14125                           <span class="op">TCF     </span> <a href="#4449444C454654">DIDLEFT</a>                               <span class="co">#  Skip the code to set only the right digit if left not drawn</span>
000126,000048: 
<a name="534B49504C454654"></a>000127,000049:    4123                        <span class="sm">SKIPLEFT</span>                                                          
000128,000050:    4123           30063                           <span class="op">CA      </span> <a href="Ram.agc.html#54454D5049">TEMPI</a>                                 <span class="co">#  Load the value for this digit to draw on the right of pair</span>
000129,000051:    4124           54135                           <span class="op">TS      </span> <a href="Ram.agc.html#44494749545F52">DIGIT_R</a>                               <span class="co">#  Store to RAM</span>
000130,000052: 
<a name="4449444C454654"></a>000131,000053:    4125                        <span class="sm">DIDLEFT </span>                                                          
000132,000054: 
000133,000055:    4125           50135                           <span class="op">INDEX   </span> <a href="Ram.agc.html#44494749545F52">DIGIT_R</a>                               <span class="co">#  Index by value of right digit</span>
000134,000056:    4126           34232                           <span class="op">CA      </span> <a href="Constants.agc.html#44535030">DSP0</a>                                  <span class="co">#  Get the 5-bit code for this digit to send to DSKY</span>
000135,000057: 
<a name="4F5554505554"></a>000136,000058:    4127                        <span class="sm">OUTPUT  </span>                                                          
000137,000059:    4127           60133                           <span class="op">AD      </span> <a href="Ram.agc.html#44534B595F4F5554">DSKY_OUT</a>                              <span class="co">#  Add bits 10-14</span>
000138,000060:    4130           60134                           <span class="op">AD      </span> <a href="Ram.agc.html#44494749545F4C">DIGIT_L</a>                               <span class="co">#  Add bits 5-9</span>
000139,000061:    4131           00006                           <span class="op">EXTEND  </span>                                       <span class="co">#  Extend in order to use I/O channel instruction</span>
000140,000062:    4132           01010                           <span class="op">WRITE   </span> <a href="Constants.agc.html#43483130">CH10</a>                                  <span class="co">#  Send the value to channel 10 to display on DKSY</span>
000141,000063: 
000142,000064:    4133           00002                           <span class="op">RETURN  </span>                                       <span class="co">#  Return from subroutine</span>

End of include-file Display.agc.  Parent file is <a href="Main.agc.html">Main.agc</a>
</pre>
</span>
</p>
</body>
</html>
